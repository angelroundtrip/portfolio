{"ast":null,"code":"import _toConsumableArray from\"/Users/angel/Development/personal-projects/portfolio/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/angel/Development/personal-projects/portfolio/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import PostList from'./PostList';import SearchBar from'./SearchBar';// import NewPostForm from './NewPostForm'\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function PostForm(_ref){var user=_ref.user,location=_ref.location,handleDeletePosts=_ref.handleDeletePosts,weatherData=_ref.weatherData;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),postContent=_useState2[0],setPostContent=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),posts=_useState4[0],setPosts=_useState4[1];// console.log(posts)\nvar addNewPosts=function addNewPosts(newObj){fetch(\"/posts\",{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(newObj)}).then(function(r){return r.json();}).then(function(post){setPosts([post].concat(_toConsumableArray(posts)));});};var submitNewPost=function submitNewPost(e){e.preventDefault();var newPost={post_content:postContent,user_id:user.id,location_id:location.id};addNewPosts(newPost);setPostContent(\"\");// console.log(newPost)\n};// * Renders all posts\nuseEffect(function(){fetch(\"/posts\").then(function(r){return r.json();}).then(setPosts);},[]);// * Search function by location\nvar _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),locationData=_useState6[0],setLocationData=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),search=_useState8[0],setSearch=_useState8[1];useEffect(function(){fetch('/posts').then(function(response){return response.json();}).then(setLocationData);},[]);var addPost=function addPost(post){return setPosts([post].concat(_toConsumableArray(posts)));};var changeSearch=function changeSearch(e){return setSearch(e.target.value);};var filteredSearch=locationData.filter(function(locationObj){var search1=locationObj.user.home_location.toLowerCase();var search2=search.toLowerCase();return search1.includes(search2);});//  console.log(filteredSearch)\n//  console.log(posts) \nreturn/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitNewPost,children:[/*#__PURE__*/_jsx(SearchBar,{changeSearch:changeSearch}),/*#__PURE__*/_jsx(\"p\",{}),/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return setPostContent(e.target.value);},style:{width:'80%'},type:\"text\",name:\"postContent\",placeholder:\"A cool event this weekend? Had a great meal at a restaurant? Traveling somewhere? Share what's happening around town!\",value:postContent}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:{width:'10%'},children:\" Add Post \"}),/*#__PURE__*/_jsx(PostList// * currently breaks either search or posts (without manual refresh)\n,{posts:posts// posts={filteredSearch}\n,user:user,handleDeletePosts:handleDeletePosts,weatherData:weatherData})]})});}export default PostForm;","map":{"version":3,"sources":["/Users/angel/Development/personal-projects/portfolio/src/components/Post.js"],"names":["React","useState","useEffect","PostList","SearchBar","PostForm","user","location","handleDeletePosts","weatherData","postContent","setPostContent","posts","setPosts","addNewPosts","newObj","fetch","method","headers","body","JSON","stringify","then","r","json","post","submitNewPost","e","preventDefault","newPost","post_content","user_id","id","location_id","locationData","setLocationData","search","setSearch","response","addPost","changeSearch","target","value","filteredSearch","filter","locationObj","search1","home_location","toLowerCase","search2","includes","width"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport PostList from './PostList'\nimport SearchBar from './SearchBar'\n// import NewPostForm from './NewPostForm'\n\n\nfunction PostForm({user, location, handleDeletePosts, weatherData}) {\n\n  const [postContent, setPostContent] = useState(\"\")\n  const [posts, setPosts] = useState([])\n  // console.log(posts)\n  \n  const addNewPosts = newObj => {\n    fetch(`/posts`, {\n      method: 'POST', \n      headers: {'Content-Type': 'application/json'},\n      body: JSON.stringify(newObj)\n    })\n    .then(r => r.json())\n    .then(post => {setPosts([post, ...posts])\n    })\n  }\n\n  const submitNewPost = (e) => {\n    e.preventDefault()\n    const newPost = {\n      post_content: postContent,\n      user_id: user.id,\n      location_id: location.id\n    }\n    addNewPosts(newPost)\n    setPostContent(\"\")\n    // console.log(newPost)\n  }\n\n  // * Renders all posts\n  useEffect(()=>{\n    fetch(`/posts`)\n    .then(r=>r.json())\n    .then(setPosts)\n  }, [])\n\n   // * Search function by location\n   const [locationData, setLocationData] = useState([])\n   const [search, setSearch] = useState('')\n\n   useEffect(() => {\n     fetch('/posts')\n       .then(response => response.json())\n       .then(setLocationData)\n   }, [])\n\n  const addPost = (post) => setPosts([post, ...posts])\n  const changeSearch = (e) => setSearch(e.target.value)\n  \n \n   const filteredSearch = locationData.filter(locationObj => {\n     const search1 = locationObj.user.home_location.toLowerCase()\n     const search2 = search.toLowerCase()\n     return search1.includes(search2)\n   })\n  //  console.log(filteredSearch)\n  //  console.log(posts) \n\n  return(\n    <div>\n\n      <form onSubmit={submitNewPost}> \n\n      <SearchBar changeSearch={changeSearch} />\n\n      {/* <NewPostForm addPost={addPost} user={user} onSubmit={submitNewPost}/>  */}\n\n      <p></p> \n\n      \n      <input \n        onChange={(e)=>setPostContent(e.target.value)} \n        style={{width: '80%'}}\n        type=\"text\" \n        name=\"postContent\" \n        placeholder=\"A cool event this weekend? Had a great meal at a restaurant? Traveling somewhere? Share what's happening around town!\"\n        value={postContent}\n      />\n      <button type=\"submit\" style={{width: '10%'}}> Add Post </button>\n   \n      <PostList \n      // * currently breaks either search or posts (without manual refresh)\n        posts={posts} \n        // posts={filteredSearch}\n        user={user} \n        handleDeletePosts={handleDeletePosts} \n        weatherData={weatherData}\n      />\n    \n      </form>\n    </div>\n  )\n}\n\nexport default PostForm\n"]},"metadata":{},"sourceType":"module"}